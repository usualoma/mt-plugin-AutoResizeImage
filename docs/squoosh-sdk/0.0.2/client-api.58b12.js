(self.webpackJsonp=self.webpackJsonp||[]).push([[2],{58:function(e,t,s){"use strict";s.r(t),s.d(t,"exposeAPI",function(){return o}),s.d(t,"API",function(){return p});var n=s(55),a=s(31);function o(e){window!==top&&(self.parent.postMessage({type:"READY",version:"1"},"*"),self.addEventListener("message",e=>{"READY?"===e.data&&(e.stopImmediatePropagation(),self.parent.postMessage({type:"READY",version:"1"},"*"))}),Object(a.a)(new p(e),self.parent))}function r(e,t){return document.addEventListener(e,t),()=>document.removeEventListener(e,t)}async function i(e){const t=document.querySelector(e);return t||new Promise(t=>{const s=setInterval(()=>{const n=document.querySelector(e);n&&(clearInterval(s),t(n))},100)})}function c(e){const t=new Event("input",{bubbles:!0,cancelable:!0});e.dispatchEvent(t)}class p{constructor(e){this._app=e}back(){window.history.back()}async resizeToLimit(e,t){const s=await i('[name="resize.enable"]');s.checked||s.click();const n=await i('[name="width"]'),a=await i('[name="height"]');parseInt(n.value)/parseInt(a.value)>=e/t?(n.value=e.toString(),c(n)):(a.value=t.toString(),c(a))}async setQuality(e){const t=await i('[name="quality"]');t.value=e.toString(),c(t)}setFile(e,t){return new Promise(s=>{document.addEventListener(n.SquooshStartEventType.START,()=>s(),{once:!0}),this._app.openFile(new File([e],t))})}async getBlob(e){if(!this._app.state.file||!this._app.compressInstance)throw new Error("No file has been loaded");if(!this._app.compressInstance.state.loading&&!this._app.compressInstance.state.sides[e].loading)return this._app.compressInstance.state.sides[e].file;const t=[],s=new Promise((s,n)=>{t.push(r("squoosh:done",t=>{t.side===e&&s(this._app.compressInstance.state.sides[e].file)})),t.push(r("squoosh:abort",t=>{t.side===e&&n(new DOMException("Aborted","AbortError"))})),t.push(r("squoosh:error",t=>{t.side===e&&n(t.error)}))});return s.then(()=>t.forEach(e=>e())),s}}}}]);
//# sourceMappingURL=client-api.58b12.js.map